<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frases</title>
    <script>
    window.onload = function() {
      alert("Debes activar el VPN");
    };
  </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Frases Bonitas</h1>
        <button id="menuButton">â˜°</button>
    </header>
    <nav id="menu">
        <ul>
            <li><a href="index.html">Inicio</a></li>
            <li><a href="videos.html">Videos</a></li>
            <li><a href="viajes.html">Viajes</a></li>
            <li><a href="preguntas y respuestas.html">Preguntas y Respuestas</a></li>
            <li><a href="reencuentro.html">Reencuentro</a></li>
        </ul>
    </nav>
    <main>
        <section>
            <h2>Frases para ti â¤ï¸</h2>
            <p>"Mi amor por ti arde mÃ¡s fuerte que cualquier llama, sin importar la distancia."</p>
            <p>"Cada kilÃ³metro que nos separa no hace mÃ¡s que aumentar mi deseo de tenerte a mi lado."</p>
            <p>"Tu ausencia enciende en mÃ­ un fuego que solo tus besos pueden apagar."</p>
            <p>"SueÃ±o con el dÃ­a en que nuestros cuerpos se unan y la distancia sea solo un mal recuerdo."</p>
            <p>"Mi pasiÃ³n por ti atraviesa cualquier barrera que se interponga entre nosotros."</p>
            <p>"Eres el deseo mÃ¡s profundo que mi alma jamÃ¡s ha conocido."</p>
            <p>"A pesar de la distancia, mi amor por ti es tan intenso como siempre."</p>
            <p>"La espera solo aviva el fuego de mi deseo por ti."</p>
            <p>"Cada segundo sin ti es una tortura que soportarÃ­a eternamente por el placer de tenerte."</p>
            <p>"El pensamiento de tus caricias me mantiene vivo, incluso a miles de kilÃ³metros."</p>
            <p>â€œLa distancia nos enseÃ±a a valorar lo que tenemos, y pronto disfrutaremos de nuestro amor plenamente, sin separaciÃ³n.â€ Esto es una prueba mÃ¡s que la vida nos pone, pero como siempre, la vamos a poder vencer juntos, porque nada ni nadie podrÃ¡ contra nosotros, lo mÃ¡s difÃ­cil fue conocernos y coincidir, pues ahora hay que luchar juntos por lo nuestro y salir adelante, ambos cambiaremos y seremos mejores personas y pronto cuando logremos vivir juntos, todo esfuerzo habrÃ¡ valido la pena y los momentos malos sÃ³lo serÃ¡n recuerdos y enseÃ±anzas para nuestras vidas. Te amo mi cosita tierna ğŸ« ğŸ«¶ğŸ» pronto te tendrÃ© aquÃ­ conmigo y seremos muy felices ğŸ˜â¤ï¸ nunca olvides cuanto te amo, siempre estarÃ¡s en lo mÃ¡s profundo de mi corazÃ³n ğŸ«¶ğŸ»ğŸ¥°. Recuerda siempre, estamos destinados a estar juntos, por mas lejos que estemos y por mÃ¡s problemas que hayan entre nosotros, siempre existirÃ¡ un hilo rojo que nos una y nos mantendrÃ¡ unidos por toda la eternidad â™¾ï¸ğŸ’˜.</p>
            <!-- MÃ¡s frases -->
            <h3>Escribe una respuesta</h3>
            <form id="messageForm">
                <label for="name">Nombre:</label>
                <input type="text" id="name" name="name" required>
                <label for="message">Mensaje:</label>
                <textarea id="message" name="message" required></textarea>
                <button type="submit">Enviar</button>
            </form>
            <div class="comments" id="comments">
                <!-- Los comentarios se mostrarÃ¡n aquÃ­ -->
            </div>
        </section>
    </main>
    <script src="scripts.js"></script>
    <script type="module">
        // Importar los mÃ³dulos de Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        // ConfiguraciÃ³n de Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBfGBf5Zmp1hEZHT9aKIhTRcXjULD-jbGw",
            authDomain: "mi-web-5402c.firebaseapp.com",
            databaseURL: "https://mi-web-5402c-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "mi-web-5402c",
            storageBucket: "mi-web-5402c.appspot.com",
            messagingSenderId: "31272724190",
            appId: "1:31272724190:web:51fcc8750c51abf783844f"
        };

        // Inicializar Firebase
const app = initializeApp(firebaseConfig);
const database = getDatabase(app);
const auth = getAuth(app);

// Iniciar sesiÃ³n anÃ³nima
signInAnonymously(auth).catch((error) => {
  console.error('Error al iniciar sesiÃ³n anÃ³nima:', error);
});

// Verificar el estado de autenticaciÃ³n
onAuthStateChanged(auth, (user) => {
  if (user) {
    console.log('Usuario autenticado:', user);

    // Mostrar comentarios solo si el usuario estÃ¡ autenticado
onValue(ref(database, 'messages'), (snapshot) => {
const commentsContainer = document.getElementById('comments');
commentsContainer.innerHTML = '';

snapshot.forEach((childSnapshot) => {
const comment = childSnapshot.val();
const commentElement = document.createElement('div');
commentElement.classList.add('comment');
commentElement.innerHTML = `
<strong>${comment.name}</strong>
<p>${comment.message}</p>
<button class="editButton" data-id="${childSnapshot.key}">Editar</button>
<button class="deleteButton" data-id="${childSnapshot.key}">Eliminar</button>
`;
commentsContainer.appendChild(commentElement);
});

// AÃ±adir eventos de ediciÃ³n y eliminaciÃ³n despuÃ©s de que los comentarios se hayan renderizado
document.querySelectorAll('.editButton').forEach(button => {
button.addEventListener('click', (event) => {
const commentId = event.target.dataset.id;
const commentRef = ref(database, 'messages/' + commentId);
onValue(commentRef, (snapshot) => {
const comment = snapshot.val();
document.getElementById('name').value = comment.name;
document.getElementById('message').value = comment.message;
document.getElementById('messageForm').dataset.editing = commentId;
}, { onlyOnce: true });
});
});

document.querySelectorAll('.deleteButton').forEach(button => {
button.addEventListener('click', (event) => {
const commentId = event.target.dataset.id;
remove(ref(database, 'messages/' + commentId)).then(() => {
alert('Comentario eliminado');
}).catch((error) => {
console.error('Error al eliminar el comentario:', error);
});
});
});
}, (error) => {
console.error('Error al leer los comentarios:', error);
});
} else {
console.log('Usuario no autenticado');
}
});

// Enviar comentario
document.getElementById('messageForm').addEventListener('submit', function(event) {
event.preventDefault();

// Verificar si el usuario estÃ¡ autenticado
const user = auth.currentUser;
if (user) {
console.log('Usuario autenticado:', user);
const name = document.getElementById('name').value;
const message = document.getElementById('message').value;
const editingId = document.getElementById('messageForm').dataset.editing;

// Verificar que los campos no estÃ©n vacÃ­os
if (name.trim() === '' || message.trim() === '') {
alert('Por favor, completa todos los campos.');
return;
}

if (editingId) {
// Actualizar un comentario existente
update(ref(database, 'messages/' + editingId), {
name: name,
message: message
}).then(() => {
alert('Mensaje actualizado');
document.getElementById('messageForm').reset();
delete document.getElementById('messageForm').dataset.editing;
}).catch((error) => {
console.error('Error al actualizar el mensaje:', error);
});
} else {
// Enviar un nuevo comentario
push(ref(database, 'messages'), {
name: name,
message: message
}).then(() => {
alert('Mensaje enviado');
document.getElementById('messageForm').reset();
}).catch((error) => {
console.error('Error al enviar el mensaje:', error);
});
}
} else {
console.log('Usuario no autenticado aÃºn');
alert('Por favor, espera a que el sistema complete la autenticaciÃ³n.');
}

}).catch((error) => {
console.error('Error al enviar el mensaje:', error);
});

</script>
</body>
</html>