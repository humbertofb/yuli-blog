<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de preguntas y respuestas</title>
    <script>
    window.onload = function() {
      alert("Debes activar el VPN");
    };
  </script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h2>Preguntas y respuesta</h2>
        <button id="menuButton">☰</button>
        </header>
        <nav id="menu">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="videos.html">Videos</a></li>
                <li><a href="viajes.html">Viajes</a></li>
                <li><a href="reencuentro.html">Reencuentro</a></li>
            </ul>
        </nav>
    <main>
        <h1>Juego de Preguntas y Respuestas</h1>
        <form id="questionForm">
          <input type="text" id="name" placeholder="Escribe tu nombre" required>
            <input type="text" id="question" placeholder="Escribe tu pregunta" required>
            <button type="submit">Enviar</button>
            <div class="comments" id="comments">
                <!-- Las respuestas se mostrarán aquí -->
            </div>
        </form>
        
        <br><form id="questionForm">
          <input type="text" id="name" placeholder="Escribe tu nombre" required>
            <input type="text" id="question" placeholder="Escribe tu pregunta" required>
            <button type="submit">Enviar</button>
            <div class="comments" id="comments">
                <!-- Las respuestas se mostrarán aquí -->
            </div>
        </form>
        
        <br><form id="questionForm">
          <input type="text" id="name" placeholder="Escribe tu nombre" required>
            <input type="text" id="question" placeholder="Escribe tu pregunta" required>
            <button type="submit">Enviar</button>
            <div class="comments" id="comments">
                <!-- Las respuestas se mostrarán aquí -->
            </div>
        </form>
        
        <br><form id="questionForm">
          <input type="text" id="name" placeholder="Escribe tu nombre" required>
            <input type="text" id="question" placeholder="Escribe tu pregunta" required>
            <button type="submit">Enviar</button>
            <div class="comments" id="comments">
                <!-- Las respuestas se mostrarán aquí -->
            </div>
        </form>
        
        <br><form id="questionForm">
          <input type="text" id="name" placeholder="Escribe tu nombre" required>
            <input type="text" id="question" placeholder="Escribe tu pregunta" required>
            <button type="submit">Enviar</button>
            <div class="comments" id="comments">
                <!-- Las respuestas se mostrarán aquí -->
            </div>
        </form>
        
        <div id="questionsContainer"></div>
    </main>
    <script src="scripts.js"></script>
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";
import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";

// Configuración de Firebase
const firebaseConfig = {
    apiKey: "AIzaSyBfGBf5Zmp1hEZHT9aKIhTRcXjULD-jbGw",
    authDomain: "mi-web-5402c.firebaseapp.com",
    databaseURL: "https://mi-web-5402c-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "mi-web-5402c",
    storageBucket: "mi-web-5402c.appspot.com",
    messagingSenderId: "31272724190",
    appId: "1:31272724190:web:51fcc8750c51abf783844f"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth();
const database = getDatabase();

// Iniciar sesión anónima
signInAnonymously(auth).catch((error) => {
  console.error('Error al iniciar sesión anónima:', error);
});

// Verificar el estado de autenticación
onAuthStateChanged(auth, (user) => {
  if (user) {
    console.log('Usuario autenticado:', user);

    // Referencia a la base de datos
    const questionsRef = ref(database, 'questions');

    // Función para enviar una pregunta
    document.getElementById('questionForm').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('name').value;
        const question = document.getElementById('question').value;
        push(questionsRef, {
            name: name,
            question: question
        });
        document.getElementById('name').value = '';
        document.getElementById('question').value = '';
    });

    // Función para mostrar las preguntas
    onValue(questionsRef, (snapshot) => {
        const questionsContainer = document.getElementById('questionsContainer');
        questionsContainer.innerHTML = '';
        snapshot.forEach((childSnapshot) => {
            const data = childSnapshot.val();
            const div = document.createElement('div');
            div.className = 'question';
            div.innerHTML = `
                <p><strong>${data.name}</strong>: ${data.question}</p>
                <div class="question-buttons">
                    <button onclick="deleteQuestion('${childSnapshot.key}')">Eliminar</button>
                    <button onclick="editQuestion('${childSnapshot.key}')">Editar</button>
                    <button id="responder" onclick="answerQuestion('${childSnapshot.key}')">Responder</button>
                </div>
            `;
            questionsContainer.appendChild(div);
        });
    });

    // Función para eliminar una pregunta
    window.deleteQuestion = function(id) {
        remove(ref(database, 'questions/' + id));
    };

    // Función para editar una pregunta
    window.editQuestion = function(id) {
        // Lógica para editar la pregunta
    };

    // Función para responder una pregunta
    window.answerQuestion = function(id) {
        // Lógica para responder la pregunta
    };
  }
});
</script>
</body>
</html>
